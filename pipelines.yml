resources:
  - name: aql_res
    type: aql
    version:
      query: items({})
      addedProperties:
        ENV1: VALUE1
        ENV2: VALUE2
      mappings:
        mapping0:
          input: test_input_0
          output: test_output_0
        mapping1:
          input: test_input_1
          output: test_output_1                             

pipelines:
  - name: ankul_pipeline_3
    steps:

      - name: test_bash_step
        type: bash
        configuration:
          nodePool: ankul_nodes
        requires:
          resources:
            - aql_res
        execution:
          onExecute:
            - printenv
            - cat $STEP_JSON_PATH
            - export aqlResName=aql_res
            - addedProperties=$(jq -r ".resources."$aqlResName".addedProperties" $STEP_JSON_PATH)
            - echo $addedProperties
